webpackJsonp([15],{"3v8c":function(t,e,a){"use strict";function n(t){return Object(s.a)({url:"/basis/message/getPage",method:"get",params:t})}e.a=n;var s=a("vLgD")},DDBW:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("P0gN"),s=a("wlXM"),i=a("VU/8"),o=i(n.a,s.a,!1,null,null,null);e.default=o.exports},P0gN:function(t,e,a){"use strict";var n=a("mvHQ"),s=a.n(n),i=a("Dd8w"),o=a.n(i),l=a("3v8c"),r=a("NYxO"),c=a("lbKt");a("E4LH");e.a={name:"table_message",computed:o()({},Object(r.b)(["permissions","client"])),data:function(){return{config:{key:null,value:null},messageConfigRules:{dxtAccount:[{required:!0,message:"请输入账号",trigger:["blur","change"]}],dxtPassword:[{required:!0,message:"请输入密码",trigger:["blur","change"]}]},messageConfig:{dxtAccount:null,dxtPassword:null},list:[],total:null,messageConfigOption:!1,btnLoading:!1,listLoading:!0,dialogStatus:"create",showModule:"list",listQuery:{page:1,limit:20,name:null}}},created:function(){this.getList()},filters:{sendFilter:function(t){return{0:"暂未发送",100:"发送成功",101:"验证失败(101)",102:"手机号码格式不正确(102)",103:"会员级别不够(103)",104:"内容未审核(104)",105:"内容过多(105)",106:"账户余额不足(106)",107:"Ip受限(107)",108:"手机号码发送太频繁，请换号或隔天再发(108)",109:"帐号被锁定(109)",110:"发送通道不正确(110)",111:"当前时间段禁止短信发送(111)",120:"短信发送系统升级(120)"}[t]}},methods:{getList:function(){var t=this;this.listLoading=!0,Object(l.a)(this.listQuery).then(function(e){t.list=e.data.data.list,t.total=e.data.data.totalCount,t.listLoading=!1})},handleSizeChange:function(t){this.listQuery.limit=t,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},searchClick:function(){this.listQuery.page=1,this.getList()},jump:function(){window.open("http://www.dxton.com/")},messageConfigClick:function(){var t=this;this.messageConfigOption=!0,Object(c.c)("dxton_config").then(function(e){console.log(e.data),t.config.key=e.data.key,t.dialogStatus="create",e.data.data&&(t.dialogStatus="update",t.config.configId=e.data.data.configId,t.messageConfig.dxtAccount=JSON.parse(e.data.data.value).dxtAccount,t.messageConfig.dxtPassword=JSON.parse(e.data.data.value).dxtPassword)})},createMessageConfig:function(t){var e=this;this.$refs[t].validate(function(a){a&&(e.btnLoading=!0,e.config.value=s()(e.messageConfig),"create"==e.dialogStatus?Object(c.a)(e.config).then(function(){e.btnLoading=!1,e.messageConfigOption=!1,e.$refs[t].resetFields()}):"update"==e.dialogStatus&&Object(c.a)(e.config).then(function(){e.btnLoading=!1,e.messageConfigOption=!1,e.$refs[t].resetFields()}))})}}}},lbKt:function(t,e,a){"use strict";function n(t){return Object(u.a)({url:"/basis/config/getPage",method:"get",params:t})}function s(t){return Object(u.a)({url:"/basis/config/save",method:"post",data:t})}function i(t){return Object(u.a)({url:"/basis/config/getByGroupKey/"+t,method:"get"})}function o(t){return Object(u.a)({url:"/basis/config/getByKey/"+t,method:"get"})}function l(t){return Object(u.a)({url:"/basis/config/"+t,method:"delete"})}function r(){return Object(u.a)({url:"/oss/config",method:"get"})}function c(t){return Object(u.a)({url:"/oss/saveConfig",method:"post",data:t})}e.e=n,e.a=s,e.c=i,e.d=o,e.b=l,e.f=r,e.g=c;var u=a("vLgD")},mvHQ:function(t,e,a){t.exports={default:a("qkKv"),__esModule:!0}},qkKv:function(t,e,a){var n=a("FeBl"),s=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(t){return s.stringify.apply(s,arguments)}},wlXM:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container calendar-list-container",style:{height:t.$store.state.app.client.height+"px"}},[a("el-card",{staticStyle:{"margin-bottom":"5px",height:"80px"}},[a("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"关键词"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.searchClick(e)}},model:{value:t.listQuery.name,callback:function(e){t.$set(t.listQuery,"name",e)},expression:"listQuery.name"}}),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary"},on:{click:t.searchClick}},[t._v("搜索")]),t._v(" "),a("el-button",{staticClass:"filter-item",staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.messageConfigClick}},[t._v("配置短信密钥")])],1),t._v(" "),a("el-card",{style:{height:t.$store.state.app.client.height-125+"px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{height:t.$store.state.app.client.height-225,data:t.list,"element-loading-text":"给我一点时间",border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"内容"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.message))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"接收者姓名"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"接收电话"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.mobile))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"发送状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("sendFilter")(e.row.status)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"发送时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("subTime")(e.row.sendTime)))])]}}])})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.listLoading,expression:"!listLoading"}],staticClass:"pagination-container",staticStyle:{"margin-top":"20px"}},[a("el-pagination",{attrs:{"current-page":t.listQuery.page,background:"","page-sizes":[10,20,30,50],"page-size":t.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.listQuery,"page",e)}}})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"添加短信配置",width:"550px",visible:t.messageConfigOption},on:{clock:function(t){this.$refs.messageConfig.resetFields()},"update:visible":function(e){t.messageConfigOption=e}}},[a("el-form",{ref:"messageConfig",attrs:{model:t.messageConfig,rules:t.messageConfigRules,"label-position":"left"}},[a("el-form-item",{attrs:{prop:"dxtAccount"}},[a("el-input",{attrs:{placeholder:"账号"},model:{value:t.messageConfig.dxtAccount,callback:function(e){t.$set(t.messageConfig,"dxtAccount",e)},expression:"messageConfig.dxtAccount"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"dxtPassword"}},[a("el-input",{attrs:{placeholder:"密码"},model:{value:t.messageConfig.dxtPassword,callback:function(e){t.$set(t.messageConfig,"dxtPassword",e)},expression:"messageConfig.dxtPassword"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.jump}},[a("i",{staticClass:"el-icon-fa-registered"}),t._v(" 注 册")]),t._v(" "),a("el-button",{attrs:{loading:t.btnLoading,type:"primary"},on:{click:function(e){t.createMessageConfig("messageConfig")}}},[a("i",{staticClass:"el-icon-fa-save"}),t._v(" 保 存")])],1)],1)],1)},s=[],i={render:n,staticRenderFns:s};e.a=i}});
//# sourceMappingURL=15.712b5e41d88e86b50008.js.map