webpackJsonp([18],{"0O8v":function(t,e,r){e=t.exports=r("FZ+f")(!0),e.push([t.i,".el-input-number .el-input__inner[data-v-ca9c146a]{text-align:left}","",{version:3,sources:["G:/重庆壹鹿驾校/elk-cloud-ui/src/views/modules/upms/org/index.vue"],names:[],mappings:"AACA,mDACE,eAAiB,CAClB",file:"index.vue",sourcesContent:["\n.el-input-number .el-input__inner[data-v-ca9c146a] {\n  text-align: left;\n}\n"],sourceRoot:""}])},"95kF":function(t,e,r){"use strict";function o(t){r("b3xB")}Object.defineProperty(e,"__esModule",{value:!0});var n=r("mywC"),i=r("9e7W"),a=r("VU/8"),s=o,l=a(n.a,i.a,!1,s,"data-v-ca9c146a",null);e.default=l.exports},"9e7W":function(t,e,r){"use strict";var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container calendar-list-container",style:{height:t.$store.state.app.client.height+"px"}},[r("el-row",{attrs:{gutter:10}},[r("el-col",{staticClass:"org-tree-left"},[r("el-card",{staticClass:"box-card"},[r("span",{staticStyle:{"font-size":"16px","font-family":"'微软雅黑 Light'",color:"rgb(145,145,145)"}},[t._v("┃ 部门总览")]),t._v(" "),r("my-tree",{attrs:{data:t.treeData,choiceType:"folder"},on:{node:t.getOrg},model:{value:t.org.orgId,callback:function(e){t.$set(t.org,"orgId",e)},expression:"org.orgId"}})],1)],1),t._v(" "),r("el-col",{style:{width:t.$store.state.app.client.width-225+"px"}},[r("el-card",{staticClass:"box-card",staticStyle:{height:"80px","margin-bottom":"10px"}},[r("el-button-group",[t.permissions.upms_org_add?r("el-button",{attrs:{type:"primary"},on:{click:function(e){t.operationClick("create")}}},[r("i",{staticClass:"el-icon-plus"}),t._v("添加")]):t._e(),t._v(" "),t.permissions.upms_org_update?r("el-button",{attrs:{type:"primary",icon:"edit"},on:{click:function(e){t.operationClick("update")}}},[t._v("编辑")]):t._e(),t._v(" "),t.permissions.upms_org_del?r("el-button",{attrs:{type:"primary",icon:"delete"},on:{click:t.deleteClick}},[t._v("删除")]):t._e()],1)],1),t._v(" "),r("el-card",{staticClass:"box-card",staticStyle:{overflow:"auto"},style:{height:t.$store.state.app.client.height-130+"px"}},[r("el-form",{ref:"form",attrs:{"label-position":"right","label-width":"80px",rules:t.rules,model:t.form}},[r("el-form-item",{attrs:{label:"上级部门",prop:"parentName"}},[r("el-input",{attrs:{readonly:"",disabled:""===t.option,placeholder:"请选择上级部门"},model:{value:t.form.parentName,callback:function(e){t.$set(t.form,"parentName",e)},expression:"form.parentName"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"部门名字",prop:"orgName"}},[r("el-input",{attrs:{disabled:""===t.option,placeholder:"请输入部门名字"},model:{value:t.form.orgName,callback:function(e){t.$set(t.form,"orgName",e)},expression:"form.orgName"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"排序",prop:"sort"}},[r("el-input",{attrs:{type:"number",min:0,disabled:""===t.option,placeholder:"排序"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",t._n(e))},expression:"form.sort"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"备注",prop:"remark"}},[r("el-input",{attrs:{disabled:""===t.option,placeholder:"请输入备注"},model:{value:t.form.remark,callback:function(e){t.$set(t.form,"remark",e)},expression:"form.remark"}})],1)],1),t._v(" "),r("el-row",{attrs:{gutter:10}},[""!==t.option?r("el-col",[r("el-button",{attrs:{type:"primary",icon:"edit"},on:{click:function(e){t.back("form")}}},[t._v("取消")]),t._v(" "),r("el-button",{attrs:{type:"primary",icon:"delete"},on:{click:function(e){t.save("form")}}},[t._v("确定")])],1):t._e()],1)],1)],1)],1)],1)},n=[],i={render:o,staticRenderFns:n};e.a=i},b3xB:function(t,e,r){var o=r("0O8v");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);r("rjj0")("0b667842",o,!0)},mywC:function(t,e,r){"use strict";var o=r("Dd8w"),n=r.n(o),i=r("uiBD"),a=r("NYxO");e.a={name:"index",data:function(){return{treeData:[],org:{orgId:null,name:null,parentId:null,parentName:null,remark:null,orgType:null},form:{orgId:null,name:null,parentId:null,parentName:null,remark:null,orgType:null},rules:{parentName:[{required:!0,message:"父级部门",trigger:["blur","change"]}],sort:[{required:!0,message:"排序",trigger:["blur","change"]}],orgName:[{required:!0,message:"部门名称",trigger:["blur","change"]}],remark:[{required:!1,message:"备注",trigger:""}]},defaultProps:{children:"children",label:"name"},listLoading:!1,listQuery:{page:1,limit:20},option:"",total:null}},computed:n()({},Object(a.b)(["permissions","client"])),created:function(){this.getOrgList()},methods:{getOrg:function(t){this.org=t,this.assignment()},operationClick:function(t){this.option=t,this.assignment()},assignment:function(){"create"===this.option?(this.form.parentId=this.org.orgId,this.form.groupId=this.org.groupId,this.form.companyId=this.org.companyId,this.form.parentName=this.org.name,"-"===this.org.orgType?this.form.orgType="1":"1"===this.org.orgType?this.form.orgType="2":"2"!==this.org.orgType&&"0"!==this.org.orgType||(this.form.orgType="0")):"update"===this.option&&(this.form=this.org,null===this.org.parentName&&(this.form.parentName="无"))},getOrgList:function(){var t=this;Object(i.c)().then(function(e){t.treeData=e.data.data})},back:function(t){this.option="",this.$refs[t].resetFields()},save:function(t){var e=this;this.$refs[t].validate(function(t){t&&("create"===e.option?Object(i.a)(e.form).then(function(t){e.option="",e.getOrgList()}):"update"===e.option&&Object(i.e)(e.form).then(function(t){e.option="",e.getOrgList()}))})},deleteClick:function(){var t=this;null===this.org.orgId?this.$alert("请先选择部门","提示",{type:"warning"}):this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i.b)(t.org.orgId).then(function(){t.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),t.getOrgList()})})}}}},uiBD:function(t,e,r){"use strict";function o(){return Object(l.a)({url:"/upms/org/tree",method:"get"})}function n(t){return Object(l.a)({url:"/upms/org",method:"post",data:t})}function i(t){return Object(l.a)({url:"/upms/org/"+t,method:"delete"})}function a(t){return Object(l.a)({url:"/upms/org",method:"put",data:t})}function s(){return Object(l.a)({url:"/upms/org/groupList",method:"get"})}e.c=o,e.a=n,e.b=i,e.e=a,e.d=s;var l=r("vLgD")}});
//# sourceMappingURL=18.0946d8e1645f8759a7a7.js.map