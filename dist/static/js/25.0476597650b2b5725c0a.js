webpackJsonp([25],{"1ND8":function(t,e,i){var n=i("Lb2t");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("e4ac6732",n,!0)},Lb2t:function(t,e,i){e=t.exports=i("FZ+f")(!0),e.push([t.i,".close-iframe[data-v-8df314d6]{position:absolute;right:35px;top:110px;font-size:40px;z-index:66;color:red}.close-iframe[data-v-8df314d6]:hover{cursor:pointer}","",{version:3,sources:["G:/重庆壹鹿驾校/elk-cloud-ui/src/views/modules/activiti/model/index.vue"],names:[],mappings:"AACA,+BACE,kBAAmB,AACnB,WAAY,AACZ,UAAW,AACX,eAAgB,AAChB,WAAY,AACZ,SAAW,CACZ,AACD,qCACE,cAAgB,CACjB",file:"index.vue",sourcesContent:["\n.close-iframe[data-v-8df314d6]{\n  position: absolute;\n  right: 35px;\n  top: 110px;\n  font-size: 40px;\n  z-index: 66;\n  color: red;\n}\n.close-iframe[data-v-8df314d6]:hover{\n  cursor: pointer;\n}\n"],sourceRoot:""}])},"WP++":function(t,e,i){"use strict";function n(t){return Object(d.a)({url:"/activiti/model/modelPage",method:"get",params:t})}function o(t){return Object(d.a)({url:"/activiti/model/showFlowImg/"+t,method:"get"})}function a(t){return Object(d.a)({url:"/activiti/model/add",method:"post",data:t})}function s(t){return Object(d.a)({url:"/activiti/model",method:"put",data:t})}function r(t){return Object(d.a)({url:"/activiti/model/flowTree/"+t,method:"get"})}function l(t){return Object(d.a)({url:"/activiti/model/"+t,method:"delete"})}function c(t){return Object(d.a)({url:"/activiti/model/deploy/"+t,method:"put"})}function u(t){return Object(d.a)({url:"/activiti/model/default/"+t,method:"put"})}e.e=n,e.h=o,e.f=a,e.g=s,e.a=r,e.c=l,e.d=c,e.b=u;var d=i("vLgD")},gGLR:function(t,e,i){"use strict";var n=i("Dd8w"),o=i.n(n),a=i("WP++"),s=i("NYxO"),r=i("TIfe");e.a={name:"active_model",components:{},data:function(){return{showPlate:"list",option:!1,dialogType:"create",listQuery:{page:1,limit:20,condition:""},modelList:[],model:{orgId:null,name:null,description:null},rules:{name:[{required:!0,message:"请输入模型名称",trigger:"submit"}],description:[{required:!0,message:"请输入描述",trigger:"submit"}],orgId:[{required:!0,message:"请选择组织",trigger:"submit"}]},busTree:[],bus:{},total:null,tableLoading:!1,svg:"",url:""}},computed:o()({},Object(s.b)(["permissions","client"])),mounted:function(){},created:function(){this.getList()},methods:{getList:function(){var t=this;this.tableLoading=!0,Object(a.e)(this.listQuery).then(function(e){var i=e.data.data;t.modelList=i.list,t.total=i.totalCount,t.tableLoading=!1})},isShow:function(t){return this.showPlate===t},busSet:function(t){this.bus=t},designFlow:function(t){this.url=this.$store.state.app.iFrameUrl+"/activiti/model/create?modelId="+t+"&token="+Object(r.a)(),this.showPlate="design"},delModel:function(t){var e=this;this.$confirm("确定删除流程?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(a.c)(t).then(function(t){e.getList()})})},setDefault:function(t){var e=this;this.$confirm("将流程设置为默认并部署?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(a.b)(t).then(function(t){e.getList()})})},deploy:function(t){var e=this;this.$confirm("确定部署流程?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(a.d)(t).then(function(t){e.getList()})})},showFlowImg:function(t){var e=this;Object(a.h)(t).then(function(t){e.svg=t.data.data,e.showPlate="img"})},flowTree:function(t){Object(a.a)(t).then(function(t){})},dialogOpen:function(t){t?(this.model={modelId:t.modelId,orgId:t.orgId,name:t.name,description:t.description},this.dialogType="update"):this.dialogType="create",this.option=!0},create:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.$store.dispatch("setLoading",!0),Object(a.f)(e.model).then(function(){e.option=!1,e.loading=!1,e.getList()})})},cancel:function(t){this.option=!1,this.bus={},this.model={},this.$refs[t].resetFields(),this.getList()},update:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.$store.dispatch("setLoading",!0),Object(a.g)(e.model).then(function(){e.option=!1,e.getList()})})},search:function(){this.listQuery.page=1,this.getList()},openList:function(){this.showPlate="list",this.url="",this.getList()},handleSizeChange:function(t){this.listQuery.limit=t,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()}}}},jd3b:function(t,e,i){"use strict";function n(t){i("1ND8")}Object.defineProperty(e,"__esModule",{value:!0});var o=i("gGLR"),a=i("ozDp"),s=i("VU/8"),r=n,l=s(o.a,a.a,!1,r,"data-v-8df314d6",null);e.default=l.exports},ozDp:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container calendar-list-container",style:{height:t.$store.state.app.client.height+"px"}},[i("transition",{attrs:{name:"el-zoom-in-center"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow("list"),expression:"isShow('list')"}]},[i("el-card",{style:{height:t.$store.state.app.client.height-40+"px"}},[i("div",{staticClass:"filter-container",staticStyle:{"padding-bottom":"20px"}},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px",margin:"0"},attrs:{placeholder:"关键字"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.search(e)}},model:{value:t.listQuery.condition,callback:function(e){t.$set(t.listQuery,"condition",e)},expression:"listQuery.condition"}}),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.search}},[t._v("搜索")])],1),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%","text-align":"center"},attrs:{data:t.modelList,border:"",height:t.$store.state.app.client.height-225,stripe:!0,"element-loading-text":"给我一点时间",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"50"}}),t._v(" "),i("el-table-column",{attrs:{prop:"name",label:"流程名字",align:"center",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.name))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"是否部署",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s("0"===e.row.status?"未部署":"已部署"))]),i("span",{staticStyle:{color:"#67c23a"}},[t._v(t._s("0"===e.row.defaultFlag?"":"[默认]"))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"orgName",label:"机构",align:"center",width:"300"}}),t._v(" "),i("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t._f("subTime")(e.row.createTime)))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"left",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(i){t.designFlow(e.row.modelId)}}},[t._v("编 辑")]),t._v(" "),"0"===e.row.status?i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(i){t.deploy(e.row.modelId)}}},[t._v("部署")]):t._e(),t._v(" "),"0"===e.row.defaultFlag?i("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(i){t.setDefault(e.row.modelId)}}},[t._v("部署为默认流程")]):t._e(),t._v(" "),"0"===e.row.status?i("el-button",{attrs:{size:"mini",type:"danger",plain:""},on:{click:function(i){t.delModel(e.row.modelId)}}},[t._v("删除")]):t._e()]}}])})],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.tableLoading,expression:"!tableLoading"}],staticClass:"pagination-container",staticStyle:{"margin-top":"20px"}},[i("el-pagination",{staticStyle:{float:"left"},attrs:{"current-page":t.listQuery.page,background:"","page-sizes":[10,20,30,50],"page-size":t.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.listQuery,"page",e)}}}),t._v(" "),i("div",{staticStyle:{float:"right"}},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.designFlow(-1)}}},[i("i",{staticClass:"el-icon-plus"}),t._v("添加")])],1)],1)],1)],1)]),t._v(" "),i("transition",{attrs:{name:"el-zoom-in-center"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow("design"),expression:"isShow('design')"}]},[i("span",{on:{click:t.openList}},[i("svg-icon",{staticClass:"close-iframe",attrs:{"icon-class":"close"}})],1),t._v(" "),i("iframe",{ref:"iframe",staticStyle:{border:"0"},attrs:{src:t.url,frameborder:"0",height:t.$store.state.app.client.height-60+"px",width:"100%"}})])]),t._v(" "),i("transition",{attrs:{name:"el-zoom-in-center"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow("img"),expression:"isShow('img')"}]},[i("el-card",{staticStyle:{overflow:"auto"},style:{height:t.$store.state.app.client.height-40+"px"}},[i("span",{on:{click:t.openList}},[i("svg-icon",{staticClass:"close-iframe",attrs:{"icon-class":"close"}})],1),t._v(" "),i("div",{domProps:{innerHTML:t._s(t.svg)}})])],1)])],1)},o=[],a={render:n,staticRenderFns:o};e.a=a}});
//# sourceMappingURL=25.0476597650b2b5725c0a.js.map