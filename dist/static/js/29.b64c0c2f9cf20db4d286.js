webpackJsonp([29],{"12uW":function(t,e,i){"use strict";function n(t){i("K8G1")}Object.defineProperty(e,"__esModule",{value:!0});var s=i("vXxv"),l=i("7gFz"),a=i("VU/8"),o=n,r=a(s.a,l.a,!1,o,null,null);e.default=r.exports},"7gFz":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container calendar-list-container1",attrs:{styl1e:{height:t.$store.state.app.client.height+"px"}}},[i("el-col",{attrs:{style1:{width:t.$store.state.app.client.width+"px"}}},[i("el-card",{staticStyle:{"margin-bottom":"5px",height:"50px"},attrs:{"body-style":"padding:10px 20px;"}},[i("el-row",{attrs:{gutter:10}},[i("el-col",{attrs:{xs:6,sm:6,md:5,lg:4}},[i("dict",{attrs:{dictType:"dict_customer_type",size:"mini",placeholder:"类别"},model:{value:t.listQuery.customerType,callback:function(e){t.$set(t.listQuery,"customerType",e)},expression:"listQuery.customerType"}})],1),t._v(" "),i("el-col",{attrs:{xs:6,sm:6,md:5,lg:4}},[i("dict",{attrs:{dictType:"dict_source",size:"mini",placeholder:"来源渠道"},model:{value:t.listQuery.source,callback:function(e){t.$set(t.listQuery,"source",e)},expression:"listQuery.source"}})],1),t._v(" "),i("el-col",{attrs:{xs:6,sm:6,md:5,lg:4}},[i("el-input",{attrs:{size:"mini",placeholder:"姓名/电话/微信"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.searchClick(e)}},model:{value:t.listQuery.condition,callback:function(e){t.$set(t.listQuery,"condition",e)},expression:"listQuery.condition"}})],1),t._v(" "),i("el-col",{attrs:{xs:6,sm:6,md:5,lg:4}},[i("el-button",{attrs:{size:"mini",type:"primary",icon:"search"},on:{click:t.searchClick}},[i("i",{staticClass:"el-icon-search"}),t._v(" 搜 索")])],1)],1)],1),t._v(" "),i("el-card",{style:{height:t.$store.state.app.client.height-95+"px"}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.list,height:t.$store.state.app.client.height-175,"element-loading-text":"给我一点时间",border:"",fit:"","highlight-current-row":""},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{staticClass:"selection",attrs:{type:"selection",align:"center",prop:"uuid"}}),t._v(" "),i("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"50"}}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"姓名"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.name))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"性别"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t._f("sexFilter")(e.row.sex)))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"类别"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.customerType))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"渠道"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.source))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"电话"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.mobile))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"微信"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.wechat))])]}}])})],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.listLoading,expression:"!listLoading"}],staticClass:"pagination-container",staticStyle:{"margin-top":"10px",clear:"both"}},[i("el-pagination",{staticStyle:{float:"left"},attrs:{"current-page":t.listQuery.page,background:"","page-sizes":[10,20,30,50],"page-size":t.listQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.listQuery,"page",e)}}}),t._v(" "),i("div",{staticStyle:{float:"right"}},[t.permissions.visit_intention_distribution?i("el-button",{staticStyle:{float:"right",margin:"0 5px"},attrs:{size:"small",type:"primary"},on:{click:t.distribution}},[i("i",{staticClass:"el-icon-refresh"}),t._v("分配")]):t._e(),t._v(" "),i("el-upload",{staticClass:"upload-demo",staticStyle:{float:"right"},attrs:{action:"/visit/intention/import",headers:t.headers,"on-success":t.handleTextSuccess,accept:".xls,.xlsx","on-error":t.handleTextError,"show-file-list":!1,"before-upload":t.beforeTextUpload}},[t.permissions.visit_intention_import?i("el-button",{attrs:{size:"small"}},[i("i",{staticClass:"el-icon-upload2"}),t._v("导入")]):t._e()],1)],1)],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"选择负责人",width:"350px",visible:t.dialogIntentionList},on:{close:t.getList,"update:visible":function(e){t.dialogIntentionList=e}}},[i("tree-select",{attrs:{url:"/upms/org/tree"},on:{"org-click":t.orgClick},model:{value:t.intentionList.orgId,callback:function(e){t.$set(t.intentionList,"orgId",e)},expression:"intentionList.orgId"}}),t._v(" "),i("el-select",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{loading:t.selectLoading,clearable:"",filterable:"",placeholder:"负责人"},model:{value:t.intentionList.userId,callback:function(e){t.$set(t.intentionList,"userId",e)},expression:"intentionList.userId"}},t._l(t.userList,function(t){return i("el-option",{key:t.userId,attrs:{label:t.name,value:t.userId}})})),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:t.closeIntention}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.redistribution}},[t._v("确 定")])],1)],1)],1)],1)},s=[],l={render:n,staticRenderFns:s};e.a=l},K8G1:function(t,e,i){var n=i("bEy1");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("92b4b5d8",n,!0)},bEy1:function(t,e,i){e=t.exports=i("FZ+f")(!0),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"index.vue",sourceRoot:""}])},vXxv:function(t,e,i){"use strict";var n=i("Dd8w"),s=i.n(n),l=i("NYxO"),a=i("1x1p"),o=i("E4LH"),r=i("mPWQ"),c=i("TIfe");e.a={name:"table_intention",data:function(){return{list:[],total:null,listLoading:!0,listQuery:{page:1,limit:20,orgId:null,condition:null,source:null,customerType:null,beginTime:null,endTime:null,state:-1,followUp:!0},interval:[],intentionList:{intentionIds:[],state:0,orgId:null,userId:null},userList:[],dialogIntentionList:!1,selectLoading:!1,orgId:null}},created:function(){this.getList()},computed:s()({},Object(l.b)(["permissions","client"]),{sexVO:function(){return{1:"男",0:"女"}[this.student.sex]},headers:function(){return{Authorization:"Bearer "+Object(c.a)()}}}),methods:{getList:function(){var t=this;this.listLoading=!0,Object(r.b)(this.listQuery).then(function(e){t.list=e.data.data.list,t.total=e.data.data.totalCount,t.listLoading=!1})},searchByOrg:function(t){t&&(this.listQuery.page=1,this.listQuery.orgId=t.id,this.getList())},searchClick:function(){this.listQuery.page=1,this.listQuery.condition=Object(o.a)(this.listQuery.condition),this.getList()},distribution:function(){0===this.intentionList.intentionIds.length?this.$message.warning("请选择意向"):this.dialogIntentionList=!0},handleSelectionChange:function(t){this.intentionList.intentionIds=[];for(var e=0;e<t.length;e++)this.intentionList.intentionIds.push(t[e].intentionId)},orgClick:function(){var t=this;this.selectLoading=!0,Object(a.j)({orgId:this.intentionList.orgId}).then(function(e){t.userList=e.data.data,t.selectLoading=!1})},redistribution:function(){var t=this;this.intentionList.userId?Object(r.f)(this.intentionList).then(function(){t.$message({type:"success",message:"分配成功"}),t.dialogIntentionList=!1}):this.$message({type:"warning",message:"请选择负责人"})},closeIntention:function(){this.dialogIntentionList=!1},handleSizeChange:function(t){this.listQuery.limit=t,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},beforeTextUpload:function(t){return this.$store.dispatch("setLoading",!0),!0},handleTextSuccess:function(t,e){this.$store.dispatch("setLoading",!1),0===t.code?(this.$message.success(t.msg),this.getList()):this.$message.error(t.msg)},handleTextError:function(t,e,i){this.$message.error("上传失败")}}}}});
//# sourceMappingURL=29.b64c0c2f9cf20db4d286.js.map