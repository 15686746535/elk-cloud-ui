webpackJsonp([35],{"1u/Q":function(t,e,i){var s=i("L33K");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);i("rjj0")("313d92a1",s,!0)},L33K:function(t,e,i){e=t.exports=i("FZ+f")(!0),e.push([t.i,".text_css[data-v-977e9e22]{color:#495060;font-size:14px;word-break:keep-all;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}","",{version:3,sources:["G:/WebStrom/elk-cloud-ui/src/views/modules/basis/revisit-question/index.vue"],names:[],mappings:"AAEA,2BACE,cAAe,AACf,eAAgB,AAChB,oBAAqB,AAErB,mBAAoB,AAEpB,gBAAiB,AAEjB,sBAAwB,CAEzB",file:"index.vue",sourcesContent:['\n@charset "UTF-8";\n.text_css[data-v-977e9e22] {\n  color: #495060;\n  font-size: 14px;\n  word-break: keep-all;\n  /* 不换行 */\n  white-space: nowrap;\n  /* 不换行 */\n  overflow: hidden;\n  /* 内容超出宽度时隐藏超出部分的内容 */\n  text-overflow: ellipsis;\n  /* 当对象内文本溢出时显示省略标记(...) ；需与overflow:hidden;一起使用。*/\n}\n'],sourceRoot:""}])},PC7e:function(t,e,i){"use strict";var s=i("Dd8w"),n=i.n(s),a=i("WJqE"),o=i("NYxO"),r=i("oQa/");e.a={name:"table_revisitQuestion",computed:n()({},Object(o.b)(["permissions","client"])),data:function(){return{revisitQuestion:{},revisitQuestionnaire:{},questionnaireList:[],questionList:[],questions:{questionList:[]},revisitQuestionnaireRules:{name:[{required:!0,message:"请填写问卷名字",trigger:["blur","change"]}],remark:[{required:!0,message:"请填写备注",trigger:["blur","change"]}]},questionnaireId:null,total:null,questionnaireLoading:!0,questionLoading:!1,questionnaireOption:!1,btnLoading:!1,haveQuestion:!0,questionnaireListQuery:{page:1,limit:20,subject:1}}},created:function(){this.getQuestionnaireList()},methods:{handleSizeChange:function(t){this.questionnaireListQuery.limit=t,this.getQuestionnaireList()},handleCurrentChange:function(t){this.questionnaireListQuery.page=t,this.getQuestionnaireList()},getQuestionnaireList:function(){var t=this;this.questionnaireLoading=!0,Object(r.c)(this.questionnaireListQuery).then(function(e){t.questionnaireList=e.data.data.list,t.total=e.data.data.totalCount,t.questionnaireLoading=!1})},handleSubject:function(){this.questionnaireListQuery.page=1,this.getQuestionnaireList(),this.questionList=[],this.haveQuestion=!0,this.questionLoading=!1},questionnaireChange:function(t){var e=this;this.revisitQuestionnaire=t,1===this.revisitQuestionnaire.state?this.revisitQuestionnaire.state=0:0===this.revisitQuestionnaire.state&&(this.revisitQuestionnaire.state=1),Object(r.d)(this.revisitQuestionnaire).then(function(t){e.getQuestionnaireList()})},createClick:function(){this.revisitQuestionnaire={},this.questionnaireOption=!0},createQuestionnaire:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.btnLoading=!0,e.revisitQuestionnaire.subject=e.questionnaireListQuery.subject,Object(r.a)(e.revisitQuestionnaire).then(function(){e.getQuestionnaireList(),e.questionnaireOption=!1,e.btnLoading=!1})})},cancelQuestionnaire:function(t){this.questionnaireOption=!1,this.$refs[t].resetFields()},questionClick:function(t){var e=this;this.questionLoading=!0,this.questionnaireId=t.questionnaireId,Object(a.b)(t.questionnaireId).then(function(t){e.questionList=t.data.data,0===e.questionList.length?(e.haveQuestion=!1,e.questionList=[{questionnaireId:e.questionnaireId}]):e.haveQuestion=!0,e.questionLoading=!1})},appendQuestion:function(t){this.questionList.splice(t+1,0,{questionnaireId:this.questionnaireId})},removeQuestion:function(t){1!==this.questionList.length&&this.questionList.splice(t,1)},saveQuestion:function(){var t=this;if(!this.questionVerification())return void this.$message.warning("问题设置有错误");this.questions.questionList=this.questionList,Object(a.a)(this.questions).then(function(){t.questionClick({questionnaireId:t.questionnaireId})})},questionVerification:function(){for(var t=0;t<this.questionList.length;t++){if(!(this.questionList[t].question&&this.questionList[t].itemA&&this.questionList[t].itemB))return!1;if(this.questionList[t].itemD&&!this.questionList[t].itemC)return!1;if(this.questionList[t].itemE&&!this.questionList[t].itemD)return!1;if(this.questionList[t].itemF&&!this.questionList[t].itemE)return!1}return!0}}}},Rmlj:function(t,e,i){"use strict";function s(t){i("1u/Q")}Object.defineProperty(e,"__esModule",{value:!0});var n=i("PC7e"),a=i("jeS2"),o=i("VU/8"),r=s,l=o(n.a,a.a,!1,r,"data-v-977e9e22",null);e.default=l.exports},jeS2:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container calendar-list-container",style:{height:t.$store.state.app.client.height+"px"}},[i("el-card",{staticStyle:{"margin-bottom":"5px",height:"80px"},attrs:{"body-style":"padding:10px 20px;"}},[i("div",{staticClass:"filter-container"},[i("div",{staticStyle:{float:"left","margin-top":"8px"}},[i("el-radio-group",{on:{change:t.handleSubject},model:{value:t.questionnaireListQuery.subject,callback:function(e){t.$set(t.questionnaireListQuery,"subject",e)},expression:"questionnaireListQuery.subject"}},[i("el-radio-button",{attrs:{label:"1"}},[t._v("科目一")]),t._v(" "),i("el-radio-button",{attrs:{label:"2"}},[t._v("科目二")]),t._v(" "),i("el-radio-button",{attrs:{label:"3"}},[t._v("科目三")])],1)],1)])]),t._v(" "),i("el-card",{staticStyle:{float:"left","border-radius":"4px 0 0 4px",overflow:"auto"},style:{height:t.$store.state.app.client.height-125+"px",width:t.$store.state.app.client.width-570+"px"}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.questionnaireLoading,expression:"questionnaireLoading"}],attrs:{data:t.questionnaireList,height:t.$store.state.app.client.height-225,"highlight-current-row":"",stripe:"","element-loading-text":"给我一点时间"},on:{"row-click":t.questionClick}},[i("el-table-column",{attrs:{type:"index",align:"center",label:"编号",width:"50"}}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"问卷名字"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.name))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"创建时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t._f("subTime")(e.row.createTime,"dateTime")))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"创建人"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.operator))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"备注"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.remark))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{attrs:{"active-value":"0","inactive-value":"1","active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(i){t.questionnaireChange(e.row)}},model:{value:e.row.state,callback:function(i){t.$set(e.row,"state",i)},expression:"scope.row.state"}})]}}])})],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.questionnaireLoading,expression:"!questionnaireLoading"}],staticClass:"pagination-container",staticStyle:{"margin-top":"20px"}},[i("el-pagination",{staticStyle:{float:"left"},attrs:{"current-page":t.questionnaireListQuery.page,background:"","page-sizes":[10,20,30,50],"page-size":t.questionnaireListQuery.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.questionnaireListQuery,"page",e)}}}),t._v(" "),i("el-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:t.createClick}},[i("i",{staticClass:"el-icon-plus"}),t._v("添加")])],1)],1),t._v(" "),i("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.questionLoading,expression:"questionLoading"}],staticStyle:{width:"570px","border-radius":"0 4px 4px 0",float:"left"},style:{height:t.$store.state.app.client.height-125+"px"},attrs:{"element-loading-text":"给我一点时间"}},[i("div",{staticStyle:{"overflow-y":"auto","overflow-x":"hidden","border-bottom":"1px solid rgb(235, 239, 245)"},style:{height:t.$store.state.app.client.height-225+"px"}},[t.haveQuestion?i("div",t._l(t.questionList,function(e,s){return i("div",{staticStyle:{clear:"both",width:"100%",margin:"10px auto"}},[i("el-row",[i("el-col",{attrs:{span:2}},[i("span",{staticStyle:{color:"#001528","font-size":"16px"}},[t._v(t._s(s+1)+"、")])]),t._v(" "),i("el-col",{attrs:{span:22}},[i("el-row",[i("span",{staticStyle:{color:"#001528","font-size":"16px"}},[t._v(t._s(e.question))])]),t._v(" "),i("el-row",{staticStyle:{"font-size":"14px"}},[i("el-col",{directives:[{name:"show",rawName:"v-show",value:e.itemA,expression:"question.itemA"}],staticStyle:{"margin-top":"10px"},attrs:{span:12}},[t._v("A: "+t._s(e.itemA))]),t._v(" "),i("el-col",{directives:[{name:"show",rawName:"v-show",value:e.itemB,expression:"question.itemB"}],staticStyle:{"margin-top":"10px"},attrs:{span:12}},[t._v("B: "+t._s(e.itemB))])],1),t._v(" "),i("el-row",{staticStyle:{"font-size":"14px"}},[i("el-col",{directives:[{name:"show",rawName:"v-show",value:e.itemC,expression:"question.itemC"}],staticStyle:{"margin-top":"10px"},attrs:{span:12}},[t._v("C: "+t._s(e.itemC))]),t._v(" "),i("el-col",{directives:[{name:"show",rawName:"v-show",value:e.itemD,expression:"question.itemD"}],staticStyle:{"margin-top":"10px"},attrs:{span:12}},[t._v("D: "+t._s(e.itemD))])],1),t._v(" "),i("el-row",{staticStyle:{"font-size":"14px"}},[i("el-col",{directives:[{name:"show",rawName:"v-show",value:e.itemE,expression:"question.itemE"}],staticStyle:{"margin-top":"10px"},attrs:{span:12}},[t._v("E: "+t._s(e.itemE))]),t._v(" "),i("el-col",{directives:[{name:"show",rawName:"v-show",value:e.itemF,expression:"question.itemF"}],staticStyle:{"margin-top":"10px"},attrs:{span:12}},[t._v("F: "+t._s(e.itemF))])],1)],1)],1)],1)})):i("div",t._l(t.questionList,function(e,s){return i("div",{staticStyle:{clear:"both",width:"100%",margin:"10px auto"}},[i("el-row",{staticStyle:{"line-height":"32px"}},[i("el-col",{attrs:{span:2}},[i("span",{staticStyle:{color:"#001528","font-size":"16px"}},[t._v(t._s(s+1)+"、")])]),t._v(" "),i("el-col",{attrs:{span:22}},[i("el-row",{staticStyle:{color:"#001528","font-size":"16px"},attrs:{gutter:2}},[i("el-col",{attrs:{span:20}},[i("el-input",{attrs:{size:"small",placeholder:"题目"},model:{value:e.question,callback:function(i){t.$set(e,"question",i)},expression:"question.question"}})],1),t._v(" "),i("el-col",{attrs:{span:2}},[i("div",{staticStyle:{margin:"0 auto",width:"32px",height:"32px"}},[i("el-button",{staticStyle:{padding:"9px"},attrs:{size:"mini",type:"danger",icon:"el-icon-delete",plain:"",circle:""},on:{click:function(e){t.removeQuestion(s)}}})],1)]),t._v(" "),i("el-col",{attrs:{span:2}},[i("div",{staticStyle:{margin:"0 auto",width:"32px",height:"32px"}},[s+1===t.questionList.length?i("el-button",{staticStyle:{padding:"9px"},attrs:{size:"mini",type:"success",icon:"el-icon-plus",plain:"",circle:""},on:{click:function(e){t.appendQuestion(s)}}}):t._e()],1)])],1),t._v(" "),i("el-row",{staticStyle:{"margin-top":"10px","font-size":"14px"}},[i("el-col",{attrs:{span:10}},[i("el-col",{attrs:{span:2}},[t._v("A:")]),t._v(" "),i("el-col",{attrs:{span:21}},[i("el-input",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"答案A"},model:{value:e.itemA,callback:function(i){t.$set(e,"itemA",i)},expression:"question.itemA"}})],1)],1),t._v(" "),i("el-col",{attrs:{span:10}},[i("el-col",{attrs:{span:2}},[t._v("B:")]),t._v(" "),i("el-col",{attrs:{span:21}},[i("el-input",{staticStyle:{width:"100%"},attrs:{size:"small",disabled:!e.itemA&&!e.itemB,placeholder:"答案B"},model:{value:e.itemB,callback:function(i){t.$set(e,"itemB",i)},expression:"question.itemB"}})],1)],1)],1),t._v(" "),i("el-row",{staticStyle:{"margin-top":"10px","font-size":"14px"}},[i("el-col",{attrs:{span:10}},[i("el-col",{attrs:{span:2}},[t._v("C:")]),t._v(" "),i("el-col",{attrs:{span:21}},[i("el-input",{staticStyle:{width:"100%"},attrs:{size:"small",disabled:!e.itemB&&!e.itemC,placeholder:"答案C"},model:{value:e.itemC,callback:function(i){t.$set(e,"itemC",i)},expression:"question.itemC"}})],1)],1),t._v(" "),i("el-col",{attrs:{span:10}},[i("el-col",{attrs:{span:2}},[t._v("D:")]),t._v(" "),i("el-col",{attrs:{span:21}},[i("el-input",{staticStyle:{width:"100%"},attrs:{size:"small",disabled:!e.itemC&&!e.itemD,placeholder:"答案D"},model:{value:e.itemD,callback:function(i){t.$set(e,"itemD",i)},expression:"question.itemD"}})],1)],1)],1),t._v(" "),i("el-row",{staticStyle:{"margin-top":"10px","font-size":"14px"}},[i("el-col",{attrs:{span:10}},[i("el-col",{attrs:{span:2}},[t._v("E:")]),t._v(" "),i("el-col",{attrs:{span:21}},[i("el-input",{staticStyle:{width:"100%"},attrs:{size:"small",disabled:!e.itemD&&!e.itemE,placeholder:"答案E"},model:{value:e.itemE,callback:function(i){t.$set(e,"itemE",i)},expression:"question.itemE"}})],1)],1),t._v(" "),i("el-col",{attrs:{span:10}},[i("el-col",{attrs:{span:2}},[t._v("F:")]),t._v(" "),i("el-col",{attrs:{span:21}},[i("el-input",{staticStyle:{width:"100%"},attrs:{size:"small",disabled:!e.itemE&&!e.itemF,placeholder:"答案F"},model:{value:e.itemF,callback:function(i){t.$set(e,"itemF",i)},expression:"question.itemF"}})],1)],1)],1)],1)],1)],1)}))]),t._v(" "),i("div",{staticStyle:{float:"right","line-height":"80px"}},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.haveQuestion,expression:"!haveQuestion"}],attrs:{type:"primary"},on:{click:t.saveQuestion}},[i("i",{staticClass:"el-icon-fa-save"}),t._v(" 保 存")])],1)]),t._v(" "),i("el-dialog",{attrs:{title:"添加问卷","show-close":!1,width:"550px",visible:t.questionnaireOption},on:{close:function(e){t.cancelQuestionnaire("revisitQuestionnaire")},"update:visible":function(e){t.questionnaireOption=e}}},[i("el-form",{ref:"revisitQuestionnaire",attrs:{model:t.revisitQuestionnaire,rules:t.revisitQuestionnaireRules,"label-position":"right","label-width":"100px"}},[i("el-form-item",{attrs:{label:"问卷名字",prop:"name"}},[i("el-input",{attrs:{placeholder:"问卷名字"},model:{value:t.revisitQuestionnaire.name,callback:function(e){t.$set(t.revisitQuestionnaire,"name",e)},expression:"revisitQuestionnaire.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"备注",prop:"remark"}},[i("el-input",{attrs:{placeholder:"备注"},model:{value:t.revisitQuestionnaire.remark,callback:function(e){t.$set(t.revisitQuestionnaire,"remark",e)},expression:"revisitQuestionnaire.remark"}})],1)],1),t._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.cancelQuestionnaire("revisitQuestionnaire")}}},[i("i",{staticClass:"el-icon-fa-undo"}),t._v(" 取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary",loading:t.btnLoading},on:{click:function(e){t.createQuestionnaire("revisitQuestionnaire")}}},[t._v("确 定")])],1)],1)],1)},n=[],a={render:s,staticRenderFns:n};e.a=a}});
//# sourceMappingURL=35.e5ad4a46bee83800e1ad.js.map